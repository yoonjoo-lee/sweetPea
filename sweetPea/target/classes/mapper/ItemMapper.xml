<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="pea.board.mapper.ItemMapper">



	<select id="itemNameCheck" parameterType="string"
		resultType="string">
		SELECT name
		FROM pea_item
		WHERE name = #{name}
		AND delyn ='N'

	</select>
	
	<insert id="itemInsert" parameterType="ItemVo">
	INSERT INTO pea_item(
				  price
				, category
				, subcategory
				, name
				, tag
				, img	
				, maker	
				, ip
	) 
	VALUES(
				  #{price}
				, #{category}
				, 1
				, #{name}
				, #{tag}
				, #{img}
				, #{maker}
				, #{ip}
	)
	</insert>
	<!-- 아이템 리스트  -->
	<select id="itemList" resultType="ItemVo">
	SELECT * FROM pea_item 
		WHERE delyn='N' and approval='Y'
		ORDER BY iidx DESC
	</select>
	
	<!-- 아이템 인기 상품순 -->
	<select id="itemListCount" resultType="ItemVo">
	SELECT * FROM pea_item 
		WHERE delyn='N' and approval='Y'
		ORDER BY count DESC, iidx DESC
	</select>
	<!-- 아이템 리스트 가격 내림차순 -->
	<select id="itemListDesc" resultType="ItemVo">
	SELECT * FROM pea_item 
		WHERE delyn='N' and approval='Y'
		ORDER BY price DESC, iidx DESC
	</select>
	<!-- 아이템 리스트 가격 오름차순 -->
	<select id="itemListAsc" resultType="ItemVo">
	SELECT * FROM pea_item 
		WHERE delyn='N' and approval='Y'
		ORDER BY price 
		ASC, iidx 
		DESC
	</select>
	<!-- 아이템 리스트 신상품순 -->
	<select id="itemListNew" resultType="ItemVo">
	SELECT * FROM pea_item 
		WHERE delyn='N' and approval='Y'
		ORDER BY iidx DESC
	</select>
	
	<!-- 아이템 리스트 신상품순 5개 -->
	<select id="itemListNewLimit" resultType="ItemVo">
	SELECT * FROM pea_item 
		WHERE delyn='N' and approval='Y'
		ORDER BY iidx DESC LIMIT 1,5;
	</select>
	
	<!-- 아이템 승인 리스트  -->
	<select id="itemApproval" resultType="ItemVo">
		SELECT * FROM pea_item 
			WHERE delyn='N' 
			AND approval='N' 
			ORDER BY iidx 
			DESC;
	</select>
	<!-- 아이템 보류 리스트  -->
	<select id="postpone" resultType="ItemVo">
		SELECT * FROM pea_item
			WHERE delyn='N'
			AND approval='N'
			AND postpone='Y'
			ORDER BY iidx 
			DESC;
	
	</select>
	
	<!-- 아이템 승인 버튼 -->
	<update id="approvalCheck" parameterType="ItemVo">
		UPDATE pea_item SET approval='Y' WHERE iidx=#{iidx}
	</update>
	<!-- 아이템 보류 버튼  -->
	<update id="postponeCheck" parameterType="ItemVo">
		UPDATE pea_item SET postpone='Y' WHERE iidx=#{iidx}
	</update>
	
</mapper>










